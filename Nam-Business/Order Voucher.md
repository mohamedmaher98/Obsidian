# شرح كلاس Production Order

## إيه هو الكلاس ده؟

ده كلاس بيمثل **أمر إنتاج** في نظام ERP للتصنيع. بمعنى إنه بيحتوي على كل البيانات اللي محتاجها عشان تنتج منتج معين.

## الهيكل العام:

### 1. الكلاس الأساسي `AbsProdOrder`

**الغرض:** بيحتوي على البيانات الأساسية اللي كل أمر إنتاج محتاجها

**البيانات الأساسية:**

- `BOM bom` - قائمة المواد (Bill of Materials) - إيه المواد المطلوبة للإنتاج
- `InvItem invItem` - المنتج اللي هنصنعه
- `RawQuantity quantity` - الكمية المطلوب إنتاجها
- `ItemSpecificDimensions specificDimensions` - أبعاد المنتج المحددة
- `Routing routing` - خطوات الإنتاج والماكينات المستخدمة
- `productionDate/expiryDate` - تواريخ الإنتاج والانتهاء

**حقول مرونة إضافية:**

- `n6` إلى `n15` - أرقام إضافية للاستخدام المرن
- `description6` إلى `description10` - نصوص إضافية

### 2. الكلاس الرئيسي `ProductionOrder`

**الغرض:** بيحتوي على كل التفاصيل المعقدة لأمر الإنتاج

## الـ Business Logic المفروض يبقى فيه:

### أ) إدارة دورة حياة الأمر:

```
Planned → Started → In Progress → Completed
```

**الحقول المهمة:**

- `status` - حالة الأمر الحالية
- `plannedStartDate/actualStartDate` - التواريخ المخططة والفعلية
- `startedOrder` - هل الأمر بدأ فعلاً؟

### ب) إدارة المكونات والموارد:

- `components` - المواد الخام المطلوبة
- `resources` - الموارد البشرية والماكينات
- `routings` - خطوات التصنيع
- `molds` - القوالب المستخدمة

### ج) إدارة التكاليف:

- `materialIssueCost` - تكلفة المواد المستخدمة
- `resourcesCost` - تكلفة الموارد
- `scrapCost` - تكلفة المخلفات
- `costReallocation` - إعادة توزيع التكاليف

### د) مراقبة الجودة:

- `qualityCheckList` - قائمة فحص الجودة
- `assuranceCheckList` - قائمة ضمان الجودة
- `retestDate` - تاريخ إعادة الاختبار

## Business Rules مفروض تبقى موجودة:

### 1. قواعد بدء الإنتاج:

- لازم يبقى في BOM صحيح
- لازم تبقى المواد متوفرة
- لازم يبقى في routing معرف
- مش ممكن نبدأ أمر مكتمل

### 2. قواعد التكلفة:

- التكاليف تتحدث أوتوماتيكياً لما المواد تتصرف
- إعادة توزيع التكاليف على المنتجات المشتركة
- حساب تكلفة الوحدة بناء على الكمية المنتجة

### 3. قواعد الجودة:

- لازم Quality Check قبل ما الأمر يخلص
- في حالة فشل الاختبار، الأمر يرجع In Progress
- Retest Date يتحدد أوتوماتيكياً

### 4. قواعد الكمية:

- مسموح زيادة في الإنتاج بنسبة معينة (`permittedPercentageForOP1`)
- ممكن تحديد إذا كانت الزيادة غير محدودة (`unlimitedOvercompletionForOP1`)

