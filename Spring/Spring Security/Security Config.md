# ๐ก๏ธ Spring Security Summary

## ุงู1. UserDetails
- ูุงุฌูุฉ (interface) ุจุชูุซู **ุงููุณุชุฎุฏู**.
- ุจุชุญุชูู ุนูู:
  - `getUsername()`
  - `getPassword()`
  - `getAuthorities()` (ุงูุฃุฏูุงุฑ/ุงูุตูุงุญูุงุช)
- Spring ุจูุณุชุนูููุง ุนุดุงู ูุนุฑู ููู ุงูููุฒุฑ ูุญูููู.

---

## 2. UserDetailsService
- ูุงุฌูุฉ ูุณุคููุฉ ุนู **ุชุญููู ุจูุงูุงุช ุงููุณุชุฎุฏู**.
- ูููุง method ุฃุณุงุณูุฉ:
  - `loadUserByUsername(String username)`
- ุบุงูุจูุง ุจุชุฑุฌุน object ูู ููุน `UserDetails`.
- ูููู ุชููุฐูุง ุจููุณู ุนุดุงู ุชุฌูุจ ุงูุจูุงูุงุช ูู DB.

---

## 3. PasswordEncoder
- ูุณุคูู ุนู **ุชุดููุฑ ูููุงุฑูุฉ ุงูุจุงุณูุฑุฏ**.
- ุฃุดูุฑ ูุงุญุฏ: `BCryptPasswordEncoder`.
- ุจูุดุชุบู ุจุงูู **Salt**:
  - ูู ูุฑุฉ ููุณ ุงูุจุงุณูุฑุฏ ุจูุชุดูุฑ ุจุดูู ูุฎุชูู.
  - ุงููุงุด ุงููุงุชุฌ ุจูุญุชูู ุฌูุงู ุงูู salt.
  -ุงู `matches(raw, encoded)` ุจูุณุชุฎุฑุฌ ุงูู salt ููุนูู ููุงุฑูุฉ ุตุญ.

---

## 4. AuthenticationManager
- ุงููุงุฌูุฉ ุงูุฃุณุงุณูุฉ ูุฅุฏุงุฑุฉ **Authentication**.
- ุจูุงุฎุฏ ุจูุงูุงุช ุงูู login (username/password).
- ุจูุฌุฑุจ ููุดููุง ุนูู **ูุงุฆูุฉ AuthenticationProviders**.
- ุฃูู Provider ูุนุฑู ูุชุนุงูู โ ูู ุงููู ูุชุญูู.

---

## 5. AuthenticationProvider
- ุงููุณุคูู ุงููุนูู ุนู ุนูููุฉ ุงูุชุญูู.
- ุฃุดูุฑ ููุน: `DaoAuthenticationProvider`
  - ูุณุชุฎุฏู:
    - `UserDetailsService` โ ูุฌูุจ ุจูุงูุงุช ุงููุณุชุฎุฏู.
    - `PasswordEncoder` โ ููุงุฑู ุงูุจุงุณูุฑุฏ.
- ูููู ูุจูู ููู Providers ุชุงููุฉ (JWT, LDAP, ...).

---

## 6. ุงูุนูุงูุฉ ุจูููู (ุชุดุจูู)
- **AuthenticationManager** = ููุธู ูุจูุฑ ุนูุฏู ููุชุจ ููู ูุฐุง ุดุจุงู.
- **AuthenticationProvider** = ุงูุดุจุงุจูู (ูู ูุงุญุฏ ููู ููุน ูุนูู ูู ุงููุณุงูุฑูู).
- **UserDetailsService** = ูุงุนุฏุฉ ุจูุงูุงุช ุงููุณุงูุฑูู.
- **PasswordEncoder** = ุงูุฌูุงุฒ ุงููู ุจูุชุฃูุฏ ูู ุตุญุฉ ุงูุชุฐูุฑุฉ (ุงูุจุงุณูุฑุฏ).

---

## 7. SecurityFilterChain
- ุจุชุญุฏุฏ ุฅูู APIs ูุญููุฉ ูุฅูู ููุชูุญุฉ.
- ูุซุงู:
  - `/login` โ ููุชูุญ.
  - `/admin/**` โ ูุญุชุงุฌ ROLE_ADMIN.
  - `/user/**` โ ูุญุชุงุฌ ROLE_USER.

---

## โ ููุฎุต ุณุฑูุน
- **Authentication** = ุฅุซุจุงุช ุงููููุฉ (ุฅูุช ูููุ).
- **Authorization** = ุชุญุฏูุฏ ุงูุตูุงุญูุงุช (ูุณููุญูู ุชุนูู ุฅููุ).
- Flow ุฃุณุงุณู:
  1. ุงููุณุชุฎุฏู ูุฏุฎู login.
  2. `AuthenticationManager` ูุณุชูุจู.
  3. ูุฎุชุงุฑ `AuthenticationProvider`.
  4. Provider ูุณุชุฎุฏู `UserDetailsService` + `PasswordEncoder`.
  5. ูู ุตุญ โ ูุฑุฌุน `Authentication` object.
  6. ูู ุบูุท โ Exception.
