
| رقم الخطأ   | وصف المشكلة                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |     |     |     |     |     |     |     |     |     |     |     |     |     |     |
| ----------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| SRDRQ05725  | ان لما بختار بناء علي في حقل اسمه returnDate مش متعرف في الكلاسات الي موجوده في بناء علي                                                                                                                                                                                                                                                                                                                                                                                              |     |     |     |     |     |     |     |     |     |     |     |     |     |     |
| ECDR06791   | لو عملت جرد مخزني وجيت اعمل عملية بيع علي POS بيطلع ايرور عادي بس بيحفظها<br>انا عايز لما يحصل كده يطلع الايرور بس مايحفظهاش في نما درافت                                                                                                                                                                                                                                                                                                                                             |     |     |     |     |     |     |     |     |     |     |     |     |     |     |
| ECDR06750   | ماينفعش اعمل اذنين انصراف الوقت بتاعهم متداخل في  نفس اليوم لنفس الموظف                                                                                                                                                                                                                                                                                                                                                                                                               |     |     |     |     |     |     |     |     |     |     |     |     |     |     |
| ECPADR01042 | اضافة حقلين جداد 1- سعر الشراء للمكافىء  2- سعر البيع للمكافىء   بحيث لو انا بستخدم عملة دفتر الحسابات دولار , العملة بالدولار فى الهيدر واستخدمت جنية على السطر و  فبيتم اضافة 0.02 المطلوب هو فى الحقل الجديد يتم كتابة 51 فيقوم السيستم بعمل المعادلة ويتم اضافة 0.19 اتوماتيك                                                                                                                                                                                                     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |
| ECDR06812   | مطلوب انشاء شاشة "عروض اسعار صنف فرعي" في موديول مركز الخدمة تحت مجموعة مستندات الصنف الفرعي و ذلك لانشاء عرض سعر للصنف الفرعي من الاسعار الموجودة بقوائم اسعار المبيعات .                                                                                                                                                                                                                                                                                                            |     |     |     |     |     |     |     |     |     |     |     |     |     |     |
| ECPADR01041 |  اضافة اوبشن فى توجية الصرف والقبض والتحويل البنكى - فى حالة ان تم اختيار العملة فى المستند ( دولار ) فعند اضافة سطور يتم اعتبار هذة العملة وليست عملة الحساب او الشركة                                                                                                                                                                                                                                                                                                               |     |     |     |     |     |     |     |     |     |     |     |     |     |     |
| SRDRQ05757  | في سندات الدفع (صرف) والقبض في النظام، فيه توجيه بيتم لكل طرف (مدين ودائن).  <br>الطلب كان كالآتي:<br><br>- في **سند الصرف**: مطلوب **جريد للجانب الدائن** (الطرف اللي بياخد الفلوس).<br>    <br>- في **سند القبض**: مطلوب **جريد للجانب المدين** (الطرف اللي بيدفع الفلوس).<br>    <br>- الجريد دي لازم يكون فيها:<br>    <br>    - **استعلام (Query)**<br>        <br>    - **معيار (Criteria)**<br>        <br>    - نفس الحقول اللي موجودة حاليًا في التوجيه الأصلي للطرف التاني. |     |     |     |     |     |     |     |     |     |     |     |     |     |     |
|             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |     |     |     |     |     |     |     |     |     |     |     |     |     |     |
| SRDRQ05754  | في ملف الصنف -  جدول المقاسات و ألوان :<br><br>1- مطلوب اضافة : حقول نصية 1:5<br><br>2- مطلوب مسار كيان Groovy يعمل على اضافة كود المقاس واللون في احد الاكواد البديلة لأول سطر مكرر به نفس المقاس ونفس اللون                                                                                                                                                                                                                                                                         |     |     |     |     |     |     |     |     |     |     |     |     |     |     |
|             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |     |     |     |     |     |     |     |     |     |     |     |     |     |     |
| SRDRQ05775  | اضافة الجانب المحاسبي دائن ومدين والتأثير المحاسبي وانشاء القيد النظامي                                                                                                                                                                                                                                                                                                                                                                                                               |     |     |     |     |     |     |     |     |     |     |     |     |     |     |
| ECDR06832   | انشاء صلاحية مكطالعة القوائم واعطاء الصلاحيات لليوزر                                                                                                                                                                                                                                                                                                                                                                                                                                  |     |     |     |     |     |     |     |     |     |     |     |     |     |     |
| ECDR06876   | تعديل كل رسائل الخطأ المتعلقة ب كويري QUERY AND CRITARIA                                                                                                                                                                                                                                                                                                                                                                                                                              |     |     |     |     |     |     |     |     |     |     |     |     |     |     |
|             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |     |     |     |     |     |     |     |     |     |     |     |     |     |     |

### ==**ECDR06750**==

isValidForCommit()
validateNoOverlappingPermissionInTheSameDay(result);

```java
private void validateNoOverlappingPermissionInTheSameDay(Result result)  
{  
    Criteria criteria = CriteriaBuilder.create().field(IdsOfLeavePermission.id).notEqual(getId()) // هات كل الاذونات الي الي دي بتاعها مش انا 
    .and().field(IdsOfLeavePermission.employee).equal(getEmployee()).and()  //بفلتر عشان اجيب الاذونات لنفس الموظف
          .areDatesOverLapping(IdsOfLeavePermission.fromDate, IdsOfLeavePermission.toDate, getFromDate(), getToDate()).and()//مايكونش في تداخل فالتاريخ
          
          .commitedBefore()  //يكون اتحفظ قبل كده مش درافت 
          .build();  
    List<LeavePermission> existingLeavePermission = Persister.listPageMatching(LeavePermission.class, PageData.All(), "", criteria,  
          FilterOnDimensions.No);  
    for (LeavePermission leavePermission : existingLeavePermission)  
    {  
       if (TimeDF.areTimesOverlapping(leavePermission.getFromHour(), leavePermission.getToHour(), getFromHour(), getToHour()))  
          Result.createFailureResult("Leave permission {0} overlaps with {1} for the employee {2}, From Date {3}", leavePermission, this,  
                getEmployee(), getFromDate()).relatedToRecord(leavePermission).alwaysShowRelatedTo().addToAccumulatingResult(result);  
    }  
}

public static boolean areTimesOverlapping(TimeDF ts1, TimeDF te1, TimeDF ts2, TimeDF te2)  
{  
    Integer s1 = ts1 == null ? null : ts1.getPrimitiveValue();  
    Integer e1 = te1 == null ? null : te1.getPrimitiveValue();  
    Integer s2 = ts2 == null ? null : ts2.getPrimitiveValue();  
    Integer e2 = te2 == null ? null : te2.getPrimitiveValue();  
    if (e1 == null)  
       e1 = Integer.MAX_VALUE;  
    if (e2 == null)  
       e2 = Integer.MAX_VALUE;  
    if (s1 == null)  
       s1 = Integer.MIN_VALUE;  
    if (s2 == null)  
       s2 = Integer.MIN_VALUE;  
    return e1 >= s2 && e2 >= s1;  
}
```
---

### **==SRDRQ05757==**

ي سندات الدفع (صرف) والقبض في النظام، فيه توجيه بيتم لكل طرف (مدين ودائن).  
الطلب كان كالآتي:
- في **سند الصرف**: مطلوب **جريد للجانب الدائن** (الطرف اللي بياخد الفلوس).
- في **سند القبض**: مطلوب **جريد للجانب المدين** (الطرف اللي بيدفع الفلوس).
- الجريد دي لازم يكون فيها:
    - **استعلام (Query)**
    - **معيار (Criteria)**
    - نفس الحقول اللي موجودة حاليًا في التوجيه الأصلي للطرف التاني.
    
  1. **أنشأت DTO جديدة اسمها:**
- DTORVPVTermConfigAccountAndSubsidiarySource
  ودي بتحتوي على البيانات اللي هنرجعها من السيرفيس، وفيها:
- - الحقول اللي تم تحديدها زي `applyWhenFromDocMatchesQuery`, `applyWhenFromDocMatchesCriteria`, `fetchSubsidiaryFromDocField`, ...إلخ
- وأضفت عليها كمان حقل جديد:
EntityReferenceData calculatedSubsidiary;
وعملت ريكوست كلاس اسمه RVPVAccountSourceReq
ودي بتحمل:
- التيرم (term): اللي هو تعريف التوجيه.
- الدوكومنت اللي هنطبق عليه (fromDoc).
-عملت web method  اسمها 
- findMatchingRVPVAccountAndSubsidiarySource
ودي بتاخد الـ Request اللي فوق، وبترد بـ DTO فيها كل المعلومات المطلوبة من الكونفيج.
كتبت الـ Implementation بتاع الميثود دي:ودي بتعمل الآتي:

- جابت التيرم والدوكومنت من الـ Request.
    
- جابت الكونفيج من التيرم.
    
- لفت على كل العناصر من `accountAndSubsidiarySources`.
    
- عملت فلترة عن طريق:
    
    - `fromDocType`
        
    - `applyWhenFromDocMatchesQuery`
        
    - `applyWhenFromDocMatchesCriteria`
        
- لو كل دول اتطبقوا صح، بتحوّل الـ source لـ DTO.
    
- ولو فيه `fetchSubsidiaryFromDocField`، بتحاول تجيب الذمة المرتبطة بيه وتحطها في `calculatedSubsidiary`.